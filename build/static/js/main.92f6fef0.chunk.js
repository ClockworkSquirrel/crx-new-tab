(this["webpackJsonpcrx-new-tab"]=this["webpackJsonpcrx-new-tab"]||[]).push([[0],{101:function(e,t,a){e.exports=a(135)},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(106),a(16)),i=a(19),s=a(30),u=a.n(s),d=a(61),f=a(84),m=l.localStorage,p=JSON.parse(localStorage.getItem(m)),h=Object(i.b)({focusSearchEvent:new EventTarget,persist:Object(f.a)({wallpaperTags:["landscapes","textures","art","life","earth","cityscapes","geometric","animals","nature"],wallpaperData:{fetched:null,imageUrl:null,imagePage:null,userName:null,userImageUrl:null}},p),actions:{fetchWallpaper:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,c,i,s,d,f,m,p,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Date,n="".concat(a.getFullYear()).concat(String(a.getMonth()+1).padStart(2,0)).concat(String(a.getDate()).padStart(2,0)),(null===(t=h.persist.wallpaperData)||void 0===t?void 0:t.fetched)===n){e.next=24;break}return e.prev=3,(r=new URL(l.endpoints.unsplash)).searchParams.set("query",h.persist.wallpaperTags.join(",")),e.next=8,fetch(r,{method:"GET"});case 8:if(!(o=e.sent).ok){e.next=19;break}return e.next=12,o.json();case 12:m=e.sent,(p=new URL(null===m||void 0===m||null===(c=m.urls)||void 0===c?void 0:c.raw)).searchParams.set("crop","focalpoint"),p.searchParams.set("fit","crop"),p.searchParams.set("w",512),p.searchParams.set("h",1080),h.persist.wallpaperData={fetched:n,imageUrl:p.toString(),imagePage:null===m||void 0===m||null===(i=m.links)||void 0===i?void 0:i.html,userName:null===m||void 0===m||null===(s=m.user)||void 0===s?void 0:s.name,userImageUrl:null===m||void 0===m||null===(d=m.user)||void 0===d||null===(f=d.profile_image)||void 0===f?void 0:f.medium};case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),console.error(null!==(g=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==g?g:e.t0);case 24:return e.abrupt("return",h.persist.wallpaperData);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(){return e.apply(this,arguments)}}(),focusSearch:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(n.length>0&&void 0!==n[0])||n[0],a=new Event(t?"focus":"blur"),h.focusSearchEvent.dispatchEvent(a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unfocusSearch:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.actions.focusSearch(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});Object(i.a)((function(){localStorage.setItem(m,JSON.stringify(h.persist))}));var g=h,v=a(93),b=a(148),w=a(151),E=a(153),x=a(26),k=a(28),y=a(152),j=a(150),O=a(4),S=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",flexGrow:1,margin:e.spacing(0,0,0,2),alignItems:"flex-start",justifyContent:"center",overflow:"hidden"},infoText:{fontSize:e.typography.fontSize,margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},name:{fontWeight:e.typography.fontWeightBold},source:{fontWeight:e.typography.fontWeightLight}}})),N=function(e){var t=S();return r.a.createElement("div",{className:t.root},r.a.createElement(j.a,{variant:"body1",className:Object(O.a)(t.infoText,t.name)},null===e||void 0===e?void 0:e.name),r.a.createElement(j.a,{variant:"body1",className:Object(O.a)(t.infoText,t.source)},(null===e||void 0===e?void 0:e.source)?"via ".concat(e.source):""))},I=a(157),D=function(e){return r.a.createElement(I.a,{alt:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.src})},U=a(154),C=a(88),L=a.n(C),M=a(89),P=a.n(M),z=L()((function(e){return{root:Object(x.a)({},e.breakpoints.down("sm"),{display:"none"})}})),R=function(e){var t=z();return r.a.createElement(U.a,Object.assign({color:"inherit",rel:"noopener noreferrer",target:"_blank",className:t.root},e),r.a.createElement(P.a,null))},W=Object(b.a)((function(e){return{root:{width:"100%",height:64,backgroundColor:"rgba(0, 0, 0, .38)",color:"rgba(255, 255, 255, .87)",backdropFilter:"blur(32px)",padding:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center",cursor:"default"}}})),G=function(e){var t=W();return r.a.createElement("div",{className:t.root},r.a.createElement(D,{name:e.name,src:e.authorImage}),r.a.createElement(N,{name:e.name,source:e.source}),r.a.createElement(R,{href:e.url}))},T=Object(b.a)((function(e){return{root:{backgroundImage:function(e){var t=e.backgroundUrl;return"url(".concat(t,")")},backgroundSize:"cover",backgroundPosition:"center",backgroundColor:e.palette.background.paper,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}}})),q=function(e){var t=e.imageUrl,a=e.children,o=T({backgroundUrl:t}),c=Object(n.useState)(!1),l=Object(k.a)(c,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){if(t){var e=new Image;e.onload=function(){return s(!0)},e.src=t}}),[t]),r.a.createElement(y.a,{in:i},r.a.createElement("div",{className:o.root},a))},A=Object(i.c)((function(){var e=Object(n.useState)(),t=Object(k.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){g.actions.fetchWallpaper().then((function(e){return o(e)}))}),[]),r.a.createElement(q,{imageUrl:null===a||void 0===a?void 0:a.imageUrl},r.a.createElement(G,{name:null===a||void 0===a?void 0:a.userName,source:"Unsplash",url:null===a||void 0===a?void 0:a.imagePage,authorImage:null===a||void 0===a?void 0:a.userImageUrl}))})),F=a(90),J=a.n(F),_=a(38),B=a(156),H=a(67),K=a(92),X=a.n(K),Y=a(155),Q=function(){var e=H.isFirefox?"firefox":H.isEdge?"edge":"chrome";return r.a.createElement(Y.a,{title:l.webstore[e].name,placement:"left"},r.a.createElement(U.a,{href:l.webstore[e].url,rel:"noopener noreferrer"},r.a.createElement(X.a,null)))},V=a(35),Z=a.n(V),$=Z()(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"#ff3d00",d:"M12.222 5.977a5.402 5.402 0 0 1 3.823 1.496l2.868-2.868A9.61 9.61 0 0 0 12.222 2a9.996 9.996 0 0 0-8.937 5.51l3.341 2.59a5.96 5.96 0 0 1 5.596-4.123z"}),r.a.createElement("path",{fill:"#ffc107",d:"M3.285 7.51a10.013 10.013 0 0 0 0 8.98l3.341-2.59a5.913 5.913 0 0 1 0-3.8l-3.34-2.59z"}),r.a.createElement("path",{fill:"#4caf50",d:"M15.608 17.068A6.033 6.033 0 0 1 6.626 13.9l-3.34 2.59A9.996 9.996 0 0 0 12.221 22a9.547 9.547 0 0 0 6.618-2.423l-3.232-2.509z"}),r.a.createElement("path",{fill:"#1976d2",d:"M21.64 10.182h-9.418v3.868h5.382a4.6 4.6 0 0 1-1.996 3.018l-.01.006l.01-.006l3.232 2.51a9.753 9.753 0 0 0 2.982-7.35c0-.687-.06-1.371-.182-2.046z"})),"GoogleColour"),ee=Z()(r.a.createElement("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28a5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934a8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934c0-.528-.081-1.097-.202-1.625z"}),"Google"),te=function(e){return"".concat(e.transitions.easing.easeOut," ").concat(e.transitions.duration.shortest,"ms")},ae=Object(b.a)((function(e){return{root:{display:"flex",width:"100%",padding:e.spacing(1,1,1,2),borderRadius:2*e.shape.borderRadius,alignItems:"center",cursor:"text",transition:"background-color ".concat(te(e),", box-shadow ").concat(te(e),", border ").concat(te(e)),backgroundColor:e.palette.background.default,border:"1px solid ".concat(e.palette.background.default),"&:focus-within":{border:"1px solid ".concat(e.palette.divider),boxShadow:e.shadows[3],backgroundColor:e.palette.background.paper}},searchInput:{flexGrow:1,margin:e.spacing(0,1,0,2),display:"block",height:"100%"}}})),ne=Object(i.c)((function(){var e=ae(),t=Object(_.a)(),a=Object(n.useState)(""),o=Object(k.a)(a,2),c=o[0],i=o[1],s=Object(n.useRef)(null);return Object(n.useEffect)((function(){g.focusSearchEvent.addEventListener("focus",(function(){return s.current.focus()})),g.focusSearchEvent.addEventListener("blur",(function(){return s.current.blur()}))}),[]),r.a.createElement("div",{className:e.root,onClickCapture:g.actions.focusSearch},"dark"===t.palette.type?r.a.createElement(ee,null):r.a.createElement($,null),r.a.createElement(B.a,{className:e.searchInput,placeholder:"Search Google or type a URL",name:"q",style:{width:"100%",display:"flex",height:"100%"},autoComplete:"off",inputRef:s,onKeyPress:function(e){if("Enter"===e.key){e.preventDefault();try{var t,a=null===(t=J()(e.target.value).get())||void 0===t?void 0:t[0];if(!a)throw new Error("No URLs matched");if(e.target.value.trim()!==a)throw new Error("Search input contained more than just a URL");a.match(/^(?:[a-z]+:)?\/\//i)?window.location.assign(a):window.location.assign("http://".concat(a))}catch(r){var n=new URL(l.endpoints.search);n.searchParams.set("q",e.target.value),window.location.assign(n.toString())}}},value:c,onChange:function(e){e.preventDefault(),i(e.target.value)}}),r.a.createElement(Q,null))})),re=function(){return r.a.createElement("div",null,r.a.createElement(ne,null))},oe=Object(b.a)((function(e){return{root:{display:"flex",width:"100%",height:"100%"},wallpaperItem:Object(x.a)({maxWidth:512,flexGrow:1,flexShrink:1,overflow:"hidden"},e.breakpoints.only("xs"),{display:"none"}),contentItem:Object(x.a)({flexGrow:1,flexShrink:0,minWidth:e.breakpoints.values.sm,padding:e.spacing(3)},e.breakpoints.only("xs"),{minWidth:"100%"})}})),ce=function(){var e=oe();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.wallpaperItem},r.a.createElement(A,null)),r.a.createElement("div",{className:e.contentItem},r.a.createElement(re,null)))},le=l.flags,ie=Object(b.a)({root:{width:"100vw",height:"100vh",overflowX:"hidden"}}),se=Object(i.c)((function(){var e,t=ie(),a=window.matchMedia("(prefers-color-scheme: dark)").matches;return Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===e.key?(e.preventDefault(),g.actions.unfocusSearch()):e.target===document.body&&g.actions.focusSearch()}),!1)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{theme:(e={dark:le.enableDarkMode&&a},Object(v.a)({palette:{type:(null===e||void 0===e?void 0:e.dark)?"dark":"light"},typography:{fontFamily:["'Lexend Deca'","Helvetica","Arial","sans-serif"]}}))},r.a.createElement(E.a,null),r.a.createElement(ce,null)))}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.querySelector("#app"))},16:function(e){e.exports=JSON.parse('{"localStorage":"dev.csqrl.crx-new-tab","endpoints":{"unsplash":"https://europe-west1-figma-imagesplash.cloudfunctions.net/unsplash-random","search":"https://google.com/search?q=%s"},"webstore":{"chrome":{"name":"Chrome Web Store","url":"https://chrome.google.com/webstore/category/extensions"},"firefox":{"name":"Firefox Add-ons","url":"https://addons.mozilla.org/"},"edge":{"name":"Edge Add-ons","url":"https://microsoftedge.microsoft.com/addons"}},"flags":{"enableDarkMode":true,"enableDarkModeDev":true}}')}},[[101,1,2]]]);
//# sourceMappingURL=main.92f6fef0.chunk.js.map