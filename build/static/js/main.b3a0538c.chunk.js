(this["webpackJsonpcrx-new-tab"]=this["webpackJsonpcrx-new-tab"]||[]).push([[0],{103:function(e,t,a){e.exports=a(137)},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(108),a(15)),i=a(22),s=a(32),u=a.n(s),d=a(61),f=a(84),m=l.localStorage,p=JSON.parse(localStorage.getItem(m)),h=Object(i.b)({focusSearchEvent:new EventTarget,persist:Object(f.a)({wallpaperTags:["landscapes","textures","art","life","earth","cityscapes","geometric","animals","nature"],wallpaperData:{fetched:null,imageUrl:null,imagePage:null,userName:null,userImageUrl:null}},p),actions:{fetchWallpaper:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,c,i,s,d,f,m,p,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Date,n="".concat(a.getFullYear()).concat(String(a.getMonth()+1).padStart(2,0)).concat(String(a.getDate()).padStart(2,0)),(null===(t=h.persist.wallpaperData)||void 0===t?void 0:t.fetched)===n){e.next=24;break}return e.prev=3,(r=new URL(l.endpoints.unsplash)).searchParams.set("query",h.persist.wallpaperTags.join(",")),e.next=8,fetch(r,{method:"GET"});case 8:if(!(o=e.sent).ok){e.next=19;break}return e.next=12,o.json();case 12:m=e.sent,(p=new URL(null===m||void 0===m||null===(c=m.urls)||void 0===c?void 0:c.raw)).searchParams.set("crop","focalpoint"),p.searchParams.set("fit","crop"),p.searchParams.set("w",512),p.searchParams.set("h",1080),h.persist.wallpaperData={fetched:n,imageUrl:p.toString(),imagePage:null===m||void 0===m||null===(i=m.links)||void 0===i?void 0:i.html,userName:null===m||void 0===m||null===(s=m.user)||void 0===s?void 0:s.name,userImageUrl:null===m||void 0===m||null===(d=m.user)||void 0===d||null===(f=d.profile_image)||void 0===f?void 0:f.medium};case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),console.error(null!==(g=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==g?g:e.t0);case 24:return e.abrupt("return",h.persist.wallpaperData);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(){return e.apply(this,arguments)}}(),focusSearch:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(n.length>0&&void 0!==n[0])||n[0],a=new Event(t?"focus":"blur"),h.focusSearchEvent.dispatchEvent(a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unfocusSearch:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.actions.focusSearch(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});Object(i.a)((function(){localStorage.setItem(m,JSON.stringify(h.persist))}));var g=h,v=a(94),b=a(150),w=a(153),E=a(156),x=a(23),j=a(20),k=a(154),y=a(152),O=a(4),S=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",flexGrow:1,margin:e.spacing(0,0,0,2),alignItems:"flex-start",justifyContent:"center",overflow:"hidden"},infoText:{fontSize:e.typography.fontSize,margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},name:{fontWeight:e.typography.fontWeightBold},source:{fontWeight:e.typography.fontWeightLight}}})),D=function(e){var t=S();return r.a.createElement("div",{className:t.root},r.a.createElement(y.a,{variant:"body1",className:Object(O.a)(t.infoText,t.name)},null===e||void 0===e?void 0:e.name),r.a.createElement(y.a,{variant:"body1",className:Object(O.a)(t.infoText,t.source)},(null===e||void 0===e?void 0:e.source)?"via ".concat(e.source):""))},I=a(160),N=function(e){return r.a.createElement(I.a,{alt:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.src})},U=a(157),R=a(88),C=a.n(R),L=a(89),P=a.n(L),M=C()((function(e){return{root:Object(x.a)({},e.breakpoints.down("sm"),{display:"none"})}})),z=function(e){var t=M();return r.a.createElement(U.a,Object.assign({color:"inherit",rel:"noopener noreferrer",target:"_blank",className:t.root},e),r.a.createElement(P.a,null))},W=Object(b.a)((function(e){return{root:{width:"100%",height:64,backgroundColor:"rgba(0, 0, 0, .38)",color:"rgba(255, 255, 255, .87)",backdropFilter:"blur(32px)",padding:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center",cursor:"default"}}})),A=function(e){var t=W();return r.a.createElement("div",{className:t.root},r.a.createElement(N,{name:e.name,src:e.authorImage}),r.a.createElement(D,{name:e.name,source:e.source}),r.a.createElement(z,{href:e.url}))},G=Object(b.a)((function(e){return{root:{backgroundImage:function(e){var t=e.backgroundUrl;return"url(".concat(t,")")},backgroundSize:"cover",backgroundPosition:"center",backgroundColor:e.palette.background.paper,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}}})),T=function(e){var t=e.imageUrl,a=e.children,o=G({backgroundUrl:t}),c=Object(n.useState)(!1),l=Object(j.a)(c,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){if(t&&!i){var e=new Image;e.loading="eager",e.onload=function(){return s(!0)},e.src=t}}),[t,i]),r.a.createElement(k.a,{in:i},r.a.createElement("div",{className:o.root},a))},F=Object(i.c)((function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){g.actions.fetchWallpaper().then((function(e){return o(e)}))}),[]),r.a.createElement(T,{imageUrl:null===a||void 0===a?void 0:a.imageUrl},r.a.createElement(A,{name:null===a||void 0===a?void 0:a.userName,source:"Unsplash",url:null===a||void 0===a?void 0:a.imagePage,authorImage:null===a||void 0===a?void 0:a.userImageUrl}))})),q=a(90),J=a.n(q),B=a(91),_=a.n(B),H=a(26),K=a(159),X=a(155),Y=a(69),Q=a(93),V=a.n(Q),Z=a(158),$=function(){var e=Y.isFirefox?"firefox":Y.isEdge?"edge":"chrome";return r.a.createElement(Z.a,{title:l.webstore[e].name,placement:"left"},r.a.createElement(U.a,{href:l.webstore[e].url,rel:"noopener noreferrer"},r.a.createElement(V.a,null)))},ee=a(37),te=a.n(ee),ae=te()(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"#ff3d00",d:"M12.222 5.977a5.402 5.402 0 0 1 3.823 1.496l2.868-2.868A9.61 9.61 0 0 0 12.222 2a9.996 9.996 0 0 0-8.937 5.51l3.341 2.59a5.96 5.96 0 0 1 5.596-4.123z"}),r.a.createElement("path",{fill:"#ffc107",d:"M3.285 7.51a10.013 10.013 0 0 0 0 8.98l3.341-2.59a5.913 5.913 0 0 1 0-3.8l-3.34-2.59z"}),r.a.createElement("path",{fill:"#4caf50",d:"M15.608 17.068A6.033 6.033 0 0 1 6.626 13.9l-3.34 2.59A9.996 9.996 0 0 0 12.221 22a9.547 9.547 0 0 0 6.618-2.423l-3.232-2.509z"}),r.a.createElement("path",{fill:"#1976d2",d:"M21.64 10.182h-9.418v3.868h5.382a4.6 4.6 0 0 1-1.996 3.018l-.01.006l.01-.006l3.232 2.51a9.753 9.753 0 0 0 2.982-7.35c0-.687-.06-1.371-.182-2.046z"})),"GoogleColour"),ne=te()(r.a.createElement("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28a5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934a8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934c0-.528-.081-1.097-.202-1.625z"}),"Google"),re=function(e){return"".concat(e.transitions.easing.easeOut," ").concat(e.transitions.duration.shortest,"ms")},oe=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",padding:0,borderRadius:2*e.shape.borderRadius,transition:["background-color ".concat(re(e)),"box-shadow ".concat(re(e)),"border ".concat(re(e)),"height ".concat(re(e))],backgroundColor:e.palette.background.default,border:"1px solid ".concat(e.palette.background.default),"&:focus-within":{border:"1px solid ".concat(e.palette.divider),boxShadow:e.shadows[3],backgroundColor:e.palette.background.paper}},searchRoot:{display:"flex",flexDirection:"row",width:"100%",cursor:"text",alignItems:"center",padding:e.spacing(1,1,1,2)},searchInput:{flexGrow:1,margin:e.spacing(0,1,0,2),display:"block",height:"100%"},suggestRoot:{display:"flex",flexDirection:"column",justifyContent:"center",margin:e.spacing(0,1,1)},suggestItem:{display:"flex",flexDirection:"row",width:"100%",color:e.palette.text.secondary,padding:e.spacing(1),borderRadius:e.shape.borderRadius,transition:["background-color ".concat(re(e)),"padding ".concat(re(e)),"color ".concat(re(e))],cursor:"pointer","&:hover":{color:e.palette.text.primary}},suggestItemSelected:{color:e.palette.text.primary,backgroundColor:e.palette.divider}}})),ce=["ArrowUp","ArrowDown"];function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t,a=null===(t=J()(e).get())||void 0===t?void 0:t[0];if(!a)throw new Error("No URLs matched");if(e.trim()!==a)throw new Error("Search input contained more than just a URL");a.match(/^(?:[a-z]+:)?\/\//i)?window.location.assign(a):window.location.assign("http://".concat(a))}catch(r){var n=new URL(l.endpoints.search);n.searchParams.set("q",e),window.location.assign(n.toString())}}var ie=Object(i.c)((function(){var e=oe(),t=Object(H.a)(),a=Object(n.useState)(!1),o=Object(j.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(""),u=Object(j.a)(s,2),d=u[0],f=u[1],m=Object(n.useRef)(null),p=Object(n.useState)(-1),h=Object(j.a)(p,2),v=h[0],b=h[1],w=Object(n.useState)([]),E=Object(j.a)(w,2),k=E[0],S=E[1],D=Object(n.useRef)(_()((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=new URL("".concat(l.endpoints.autocomplete));return a.searchParams.set("hl",null!==(e=navigator.language)&&void 0!==e?e:"en-GB"),a.searchParams.set("q",t),fetch(a.toString()).then((function(e){return e.json()})).then((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e[1])&&void 0!==t?t:[]})).catch((function(e){return console.error(e)}))}),250,{trailing:!0}));return Object(n.useEffect)((function(){g.focusSearchEvent.addEventListener("focus",(function(){return m.current.focus()})),g.focusSearchEvent.addEventListener("blur",(function(){return m.current.blur()}))}),[]),Object(n.useEffect)((function(){return b(-1)}),[k]),Object(n.useEffect)((function(){v>-1&&f(k[v])}),[v]),r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.searchRoot,onClickCapture:g.actions.focusSearch},"dark"===t.palette.type?r.a.createElement(ne,null):r.a.createElement(ae,null),r.a.createElement(K.a,{className:e.searchInput,placeholder:"Search Google or type a URL",autoComplete:"off",inputRef:m,onKeyDown:function(e){if("Enter"===e.key)e.preventDefault(),le(e.target.value);else if(ce.includes(e.key))return e.preventDefault(),"ArrowUp"===e.key?b(v<=0?k.length-1:v-1):v===k.length-1?b(0):b(v+1),!1},value:d,onChange:function(e){if(e.preventDefault(),f(e.target.value),!e.target.value.trim().length)return S([]);D.current(e.target.value).then((function(e){return S(e)})).catch((function(e){return console.error(e)}))},onFocus:function(){return i(!0)},onBlur:function(){return i(!1)}}),r.a.createElement($,null)),r.a.createElement(X.a,{in:c&&k.length},r.a.createElement("div",{className:e.suggestRoot},null===k||void 0===k?void 0:k.map((function(t,a){return r.a.createElement("div",{key:t,className:Object(O.a)(e.suggestItem,Object(x.a)({},e.suggestItemSelected,a===v)),onClick:function(){f(t),le(t)}},r.a.createElement(y.a,{variant:"body1",className:e.suggestItemText},t))})))))})),se=function(){return r.a.createElement("div",null,r.a.createElement(ie,null))},ue=Object(b.a)((function(e){return{root:{display:"flex",width:"100%",height:"100%"},wallpaperItem:Object(x.a)({maxWidth:512,flexGrow:1,flexShrink:1,overflow:"hidden"},e.breakpoints.only("xs"),{display:"none"}),contentItem:Object(x.a)({flexGrow:1,flexShrink:0,minWidth:e.breakpoints.values.sm,padding:e.spacing(3)},e.breakpoints.only("xs"),{minWidth:"100%"})}})),de=function(){var e=ue();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.wallpaperItem},r.a.createElement(F,null)),r.a.createElement("div",{className:e.contentItem},r.a.createElement(se,null)))},fe=l.flags,me=Object(b.a)({root:{width:"100vw",height:"100vh",overflowX:"hidden"}}),pe=Object(i.c)((function(){var e,t=me(),a=window.matchMedia("(prefers-color-scheme: dark)").matches;return Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Escape"===e.key)e.preventDefault(),g.actions.unfocusSearch();else if(e.target===document.body){if("Enter"===e.key)return e.preventDefault();g.actions.focusSearch()}}),!1)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{theme:(e={dark:fe.enableDarkMode&&a},Object(v.a)({palette:{type:(null===e||void 0===e?void 0:e.dark)?"dark":"light"},typography:{fontFamily:["'Lexend Deca'","Helvetica","Arial","sans-serif"]}}))},r.a.createElement(E.a,null),r.a.createElement(de,null)))}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.querySelector("#app"))},15:function(e){e.exports=JSON.parse('{"localStorage":"dev.csqrl.crx-new-tab","endpoints":{"unsplash":"https://europe-west1-figma-imagesplash.cloudfunctions.net/unsplash-random","search":"https://google.com/search","autocomplete":"https://suggestqueries.google.com/complete/search?client=chrome"},"webstore":{"chrome":{"name":"Chrome Web Store","url":"https://chrome.google.com/webstore/category/extensions"},"firefox":{"name":"Firefox Add-ons","url":"https://addons.mozilla.org/"},"edge":{"name":"Edge Add-ons","url":"https://microsoftedge.microsoft.com/addons"}},"flags":{"enableDarkMode":true,"enableDarkModeDev":true}}')}},[[103,1,2]]]);
//# sourceMappingURL=main.b3a0538c.chunk.js.map