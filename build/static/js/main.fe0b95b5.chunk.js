(this["webpackJsonpcrx-new-tab"]=this["webpackJsonpcrx-new-tab"]||[]).push([[0],{104:function(e,t,n){e.exports=n(138)},13:function(e){e.exports=JSON.parse('{"localStorage":"dev.csqrl.crx-new-tab","endpoints":{"unsplash":"https://europe-west1-figma-imagesplash.cloudfunctions.net/unsplash-random","search":"https://google.com/search","autocomplete":"https://suggestqueries.google.com/complete/search?client=chrome","favicons":"https://favicongrabber.com/api/grab"},"webstore":{"chrome":{"name":"Chrome Web Store","url":"https://chrome.google.com/webstore/category/extensions/"},"firefox":{"name":"Firefox Add-ons","url":"https://addons.mozilla.org/"},"edge":{"name":"Edge Add-ons","url":"https://microsoftedge.microsoft.com/addons/"},"opera":{"name":"Opera Add-ons","url":"https://addons.opera.com/en-gb/extensions/"}},"flags":{"enableDarkMode":true,"enableDarkModeDev":true}}')},138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),l=(n(109),n(13)),i=n(17),s=n(84),u=n(24),d=n.n(u),f=n(50),p=n(85),m=l.localStorage,h=JSON.parse(localStorage.getItem(m)),g=Object(i.b)({focusSearchEvent:new EventTarget,persist:Object(p.a)({wallpaperTags:["landscapes","textures","art","life","earth","cityscapes","geometric","animals","nature"],wallpaperData:{fetched:null,imageUrl:null,imagePage:null,userName:null,userImageUrl:null},webstoreIcon:null},h),actions:{fetchWallpaper:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a,r,o,c,i,s,u,f,p,m,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Date,a="".concat(n.getFullYear()).concat(String(n.getMonth()+1).padStart(2,0)).concat(String(n.getDate()).padStart(2,0)),(null===(t=g.persist.wallpaperData)||void 0===t?void 0:t.fetched)===a){e.next=24;break}return e.prev=3,(r=new URL(l.endpoints.unsplash)).searchParams.set("query",g.persist.wallpaperTags.join(",")),e.next=8,fetch(r,{method:"GET"});case 8:if(!(o=e.sent).ok){e.next=19;break}return e.next=12,o.json();case 12:p=e.sent,(m=new URL(null===p||void 0===p||null===(c=p.urls)||void 0===c?void 0:c.raw)).searchParams.set("crop","focalpoint"),m.searchParams.set("fit","crop"),m.searchParams.set("w",512),m.searchParams.set("h",1080),g.persist.wallpaperData={fetched:a,imageUrl:m.toString(),imagePage:null===p||void 0===p||null===(i=p.links)||void 0===i?void 0:i.html,userName:null===p||void 0===p||null===(s=p.user)||void 0===s?void 0:s.name,userImageUrl:null===p||void 0===p||null===(u=p.user)||void 0===u||null===(f=u.profile_image)||void 0===f?void 0:f.medium};case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),console.error(null!==(h=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==h?h:e.t0);case 24:return e.abrupt("return",g.persist.wallpaperData);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(){return e.apply(this,arguments)}}(),focusSearch:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(a.length>0&&void 0!==a[0])||a[0],n=new Event(t?"focus":"blur"),g.focusSearchEvent.dispatchEvent(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unfocusSearch:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.actions.focusSearch(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchFavicon:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:"32x32",a=new URL(t),e.abrupt("return",fetch("".concat(l.endpoints.favicons,"/").concat(a.hostname)).then((function(e){return e.json()})).then((function(e){var t,a,r,o,c=Object(s.a)(null!==(r=null===e||void 0===e?void 0:e.icons)&&void 0!==r?r:[]);try{for(c.s();!(o=c.n()).done;){var l=o.value;if((null===l||void 0===l?void 0:l.sizes)===n)return null===l||void 0===l?void 0:l.src}}catch(i){c.e(i)}finally{c.f()}return null===e||void 0===e||null===(t=e.icons)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.src})).catch((function(e){return console.error(e)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});Object(i.a)((function(){localStorage.setItem(m,JSON.stringify(g.persist))}));var v=g,b=n(95),w=n(151),E=n(154),x=n(157),O=n(23),j=n(15),y=n(155),k=n(153),S=n(4),I=Object(w.a)((function(e){return{root:{display:"flex",flexDirection:"column",flexGrow:1,margin:e.spacing(0,0,0,2),alignItems:"flex-start",justifyContent:"center",overflow:"hidden"},infoText:{fontSize:e.typography.fontSize,margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},name:{fontWeight:e.typography.fontWeightBold},source:{fontWeight:e.typography.fontWeightLight}}})),D=function(e){var t=I();return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,{variant:"body1",className:Object(S.a)(t.infoText,t.name)},null===e||void 0===e?void 0:e.name),r.a.createElement(k.a,{variant:"body1",className:Object(S.a)(t.infoText,t.source)},(null===e||void 0===e?void 0:e.source)?"via ".concat(e.source):""))},N=n(161),U=function(e){return r.a.createElement(N.a,{alt:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.src})},R=n(158),C=n(89),L=n.n(C),P=n(90),z=n.n(P),M=L()((function(e){return{root:Object(O.a)({},e.breakpoints.down("sm"),{display:"none"})}})),A=function(e){var t=M();return r.a.createElement(R.a,Object.assign({color:"inherit",rel:"noopener noreferrer",target:"_blank",className:t.root},e),r.a.createElement(z.a,null))},W=Object(w.a)((function(e){return{root:{width:"100%",height:64,backgroundColor:"rgba(0, 0, 0, .38)",color:"rgba(255, 255, 255, .87)",backdropFilter:"blur(32px)",padding:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center",cursor:"default"}}})),F=function(e){var t=W();return r.a.createElement("div",{className:t.root},r.a.createElement(U,{name:e.name,src:e.authorImage}),r.a.createElement(D,{name:e.name,source:e.source}),r.a.createElement(A,{href:e.url}))},G=Object(w.a)((function(e){return{root:{backgroundImage:function(e){var t=e.backgroundUrl;return"url(".concat(t,")")},backgroundSize:"cover",backgroundPosition:"center",backgroundColor:e.palette.background.paper,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}}})),T=function(e){var t=e.imageUrl,n=e.children,o=G({backgroundUrl:t}),c=Object(a.useState)(!1),l=Object(j.a)(c,2),i=l[0],s=l[1];return Object(a.useEffect)((function(){if(t&&!i){var e=new Image;e.loading="eager",e.onload=function(){return s(!0)},e.src=t}}),[t,i]),r.a.createElement(y.a,{in:i},r.a.createElement("div",{className:o.root},n))},q=Object(i.c)((function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){v.actions.fetchWallpaper().then((function(e){return o(e)}))}),[]),r.a.createElement(T,{imageUrl:null===n||void 0===n?void 0:n.imageUrl},r.a.createElement(F,{name:null===n||void 0===n?void 0:n.userName,source:"Unsplash",url:null===n||void 0===n?void 0:n.imagePage,authorImage:null===n||void 0===n?void 0:n.userImageUrl}))})),J=n(91),B=n.n(J),_=n(92),H=n.n(_),K=n(27),X=n(160),Y=n(156),Q=n(62),V=n(94),Z=n.n(V),$=n(159),ee=Object(i.c)((function(){var e=Q.isFirefox?"firefox":Q.isEdge?"edge":Q.isOpera?"opera":"chrome",t=v.persist.webstoreIcon,n=Object(a.useState)(t),o=Object(j.a)(n,2),c=o[0],i=o[1];return Object(a.useEffect)((function(){v.persist.webstoreIcon||v.actions.fetchFavicon(l.webstore[e].url).then((function(e){return v.persist.webstoreIcon=e})).catch(console.error)}),[]),r.a.createElement($.a,{title:l.webstore[e].name,placement:"left"},r.a.createElement(R.a,{href:l.webstore[e].url,rel:"noopener noreferrer"},r.a.createElement(y.a,{in:c,unmountOnExit:!0,mountOnEnter:!0},r.a.createElement("img",{src:t,width:24,height:24,alt:l.webstore[e].name})),r.a.createElement(y.a,{in:!t,unmountOnExit:!0,mountOnEnter:!0,onExited:function(){return i(!0)}},r.a.createElement(Z.a,null))))})),te=n(37),ne=n.n(te),ae=ne()(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"#ff3d00",d:"M12.222 5.977a5.402 5.402 0 0 1 3.823 1.496l2.868-2.868A9.61 9.61 0 0 0 12.222 2a9.996 9.996 0 0 0-8.937 5.51l3.341 2.59a5.96 5.96 0 0 1 5.596-4.123z"}),r.a.createElement("path",{fill:"#ffc107",d:"M3.285 7.51a10.013 10.013 0 0 0 0 8.98l3.341-2.59a5.913 5.913 0 0 1 0-3.8l-3.34-2.59z"}),r.a.createElement("path",{fill:"#4caf50",d:"M15.608 17.068A6.033 6.033 0 0 1 6.626 13.9l-3.34 2.59A9.996 9.996 0 0 0 12.221 22a9.547 9.547 0 0 0 6.618-2.423l-3.232-2.509z"}),r.a.createElement("path",{fill:"#1976d2",d:"M21.64 10.182h-9.418v3.868h5.382a4.6 4.6 0 0 1-1.996 3.018l-.01.006l.01-.006l3.232 2.51a9.753 9.753 0 0 0 2.982-7.35c0-.687-.06-1.371-.182-2.046z"})),"GoogleColour"),re=ne()(r.a.createElement("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28a5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934a8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934c0-.528-.081-1.097-.202-1.625z"}),"Google"),oe=function(e){return"".concat(e.transitions.easing.easeOut," ").concat(e.transitions.duration.shortest,"ms")},ce=Object(w.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",padding:0,borderRadius:2*e.shape.borderRadius,transition:["background-color ".concat(oe(e)),"box-shadow ".concat(oe(e)),"border ".concat(oe(e)),"height ".concat(oe(e))],backgroundColor:e.palette.background.default,border:"1px solid ".concat(e.palette.background.default),"&:focus-within":{border:"1px solid ".concat(e.palette.divider),boxShadow:e.shadows[3],backgroundColor:e.palette.background.paper}},searchRoot:{display:"flex",flexDirection:"row",width:"100%",cursor:"text",alignItems:"center",padding:e.spacing(1,1,1,2)},searchInput:{flexGrow:1,margin:e.spacing(0,1,0,2),display:"block",height:"100%"},suggestRoot:{display:"flex",flexDirection:"column",justifyContent:"center",margin:e.spacing(0,1,1)},suggestItem:{display:"flex",flexDirection:"row",width:"100%",color:e.palette.text.secondary,padding:e.spacing(1),borderRadius:e.shape.borderRadius,transition:["background-color ".concat(oe(e)),"padding ".concat(oe(e)),"color ".concat(oe(e))],cursor:"pointer","&:hover":{color:e.palette.text.primary}},suggestItemSelected:{color:e.palette.text.primary,backgroundColor:e.palette.divider}}})),le=["ArrowUp","ArrowDown"];function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t,n=null===(t=B()(e).get())||void 0===t?void 0:t[0];if(!n)throw new Error("No URLs matched");if(e.trim()!==n)throw new Error("Search input contained more than just a URL");n.match(/^(?:[a-z]+:)?\/\//i)?window.location.assign(n):window.location.assign("http://".concat(n))}catch(r){var a=new URL(l.endpoints.search);a.searchParams.set("q",e),window.location.assign(a.toString())}}var se=Object(i.c)((function(){var e=ce(),t=Object(K.a)(),n=Object(a.useState)(!1),o=Object(j.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(""),u=Object(j.a)(s,2),d=u[0],f=u[1],p=Object(a.useRef)(null),m=Object(a.useState)(-1),h=Object(j.a)(m,2),g=h[0],b=h[1],w=Object(a.useState)([]),E=Object(j.a)(w,2),x=E[0],y=E[1],I=Object(a.useRef)(H()((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=new URL("".concat(l.endpoints.autocomplete));return n.searchParams.set("hl",null!==(e=navigator.language)&&void 0!==e?e:"en-GB"),n.searchParams.set("q",t),fetch(n.toString()).then((function(e){return e.json()})).then((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e[1])&&void 0!==t?t:[]})).catch((function(e){return console.error(e)}))}),250,{trailing:!0}));return Object(a.useEffect)((function(){v.focusSearchEvent.addEventListener("focus",(function(){return p.current.focus()})),v.focusSearchEvent.addEventListener("blur",(function(){return p.current.blur()}))}),[]),Object(a.useEffect)((function(){return b(-1)}),[x]),Object(a.useEffect)((function(){g>-1&&f(x[g])}),[g]),r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.searchRoot,onClickCapture:v.actions.focusSearch},"dark"===t.palette.type?r.a.createElement(re,null):r.a.createElement(ae,null),r.a.createElement(X.a,{className:e.searchInput,placeholder:"Search Google or type a URL",autoComplete:"off",inputRef:p,onKeyDown:function(e){if("Enter"===e.key)e.preventDefault(),ie(e.target.value);else if(le.includes(e.key))return e.preventDefault(),"ArrowUp"===e.key?b(g<=0?x.length-1:g-1):g===x.length-1?b(0):b(g+1),!1},value:d,onChange:function(e){if(e.preventDefault(),f(e.target.value),!e.target.value.trim().length)return y([]);I.current(e.target.value).then((function(e){return y(e)})).catch((function(e){return console.error(e)}))},onFocus:function(){return i(!0)},onBlur:function(){return i(!1)}}),r.a.createElement(ee,null)),r.a.createElement(Y.a,{in:c&&(null===x||void 0===x?void 0:x.length)},r.a.createElement("div",{className:e.suggestRoot},null===x||void 0===x?void 0:x.map((function(t,n){return r.a.createElement("div",{key:t,className:Object(S.a)(e.suggestItem,Object(O.a)({},e.suggestItemSelected,n===g)),onClick:function(){f(t),ie(t)}},r.a.createElement(k.a,{variant:"body1",className:e.suggestItemText},t))})))))})),ue=function(){return r.a.createElement("div",null,r.a.createElement(se,null))},de=Object(w.a)((function(e){return{root:{display:"flex",width:"100%",height:"100%"},wallpaperItem:Object(O.a)({maxWidth:512,flexGrow:1,flexShrink:1,overflow:"hidden"},e.breakpoints.only("xs"),{display:"none"}),contentItem:Object(O.a)({flexGrow:1,flexShrink:0,minWidth:e.breakpoints.values.sm,padding:e.spacing(3)},e.breakpoints.only("xs"),{minWidth:"100%"})}})),fe=function(){var e=de();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.wallpaperItem},r.a.createElement(q,null)),r.a.createElement("div",{className:e.contentItem},r.a.createElement(ue,null)))},pe=l.flags,me=Object(w.a)({root:{width:"100vw",height:"100vh",overflowX:"hidden"}}),he=Object(i.c)((function(){var e,t=me(),n=window.matchMedia("(prefers-color-scheme: dark)").matches;return Object(a.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Escape"===e.key)e.preventDefault(),v.actions.unfocusSearch();else if(e.target===document.body){if("Enter"===e.key)return e.preventDefault();v.actions.focusSearch()}}),!1)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{theme:(e={dark:pe.enableDarkMode&&n},Object(b.a)({palette:{type:(null===e||void 0===e?void 0:e.dark)?"dark":"light"},typography:{fontFamily:["'Lexend Deca'","Helvetica","Arial","sans-serif"]}}))},r.a.createElement(x.a,null),r.a.createElement(fe,null)))}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.querySelector("#app"))}},[[104,1,2]]]);
//# sourceMappingURL=main.fe0b95b5.chunk.js.map